---
layout: post
title: "계산기 프로젝트 리뷰"
image:
categories: [Project Review]
tags: 
  - Yagom Academy
  - Projects
sitemap:
  changefreq: daily
  priority: 1.0
---
**프로젝트명: 만국 박람회**

**프로젝트 설명:** json데이터를 decode하고 이를 tableView에 뿌려주는 형식의 간단한 어플리케이션

**프로젝트 기간: 2021/04/05 ~ 2021/04/16 (약 2주)**

**작동 화면**

<img src="https://raw.githubusercontent.com/Neph3779/Blog-Image/forUpload/img/20220922160205.gif" alt="Simulator Screen Recording - iPhone 14 - 2022-09-22 at 16.01.22" style="zoom:33%;" />

## 주요 학습 내용 

- 스토리보드 없이 코드만으로 UI 구현
- tableView의 사용
  - dynamic cell height의 적용
- json 데이터의 decode
  - CodingKeys의 활용
- scrollView의 사용
- SwiftLint의 사용
- Unit Test의 진행 
- Result type의 활용
- Data fetch 중 에러가 발생했을 때 사용자에게 alert을 보여주는 과정
- completionHandler의 사용



## 주요 피드백과 개선 내역

**Step1 PR 링크:** https://github.com/yagom-academy/ios-exposition-universelle/pull/37

**Step2 PR 링크: **https://github.com/yagom-academy/ios-exposition-universelle/pull/66

> 피드백 1: 커밋단위를 조금 더 잘게 나눠보면 어떨까합니다. 가령, 타입 세 개를 구현한 것을 하나의 커밋에 넣었는데, 타입 하나만 변경사항을 되돌리고 싶다면 다른 두 개 까지 영향을 받게 될거예요. 조금 더 고민해보면 좋겠습니다.

커밋을 잘게 쪼개서 올리는 것을 권장하는 피드백이었다. 습관화된 대량의 코드 커밋에서 기능 하나를 구현할때마다 의식적으로 커밋을 올릴지 말지에 대해 고민해보는 습관을 가지게 되었다.

<br/> 

> 피드백 2: JSON 데이터에서 특정 키에 해당하는 값이 없을수도 있다고 판단하는 것은 데이터 제공자와의 협의 혹은 확인이 꼭 필요할 것입니다. 프로그램을 구현하면서 아무런 근거없는 자의적 판단은 몇 달, 몇 년 뒤 정말 알수 없는 버그로 출현할 가능성이 `아주 매우 아주 엄청나게` 높습니다. 그건 `있어선 안될 일`이에요. 데이터에 관해서는 꼭 데이터 제공쪽과 협의된 내용에 대해서 구현해야합니다.

데이터를 이용할 때 데이터 제공자가 데이터를 잘못 제공했을 가능성을 염두해두고 그것을 걸러내는 과정을 거쳤는데, 이 부분에서 예상치 못한 피드백이 들어왔다. 데이터를 일정한 형식에 맞게 주기로 약속되어있다면 그 약속은 반드시 지켜질 것이라 가정하고 코드를 짜야한다는 의미로 받아들여졌다.

<br/> 

> 피드백 3: 꼭 코드만으로 사용해야 하는 클래스가 아니도록 유연하게 구현할 수는 없을까요?

viewController의 init을 구현하면 required init인 `NSCoder`를 인자로 받는 이니셜라이저를 추가로 구현해주어야 한다.

이때 Xcode의 자동완성기능을 이용하면 해당 이니셜라이저는 fatalError를 내보내게 되어있는데, 이 부분에 대한 피드백이었다. super 클래스의 init을 호출해주고, custom init에서 진행한 작업을 동일하게 진행해주면 스토리보드로 작업한 뷰도 같은 vieweController를 사용할 수 있었다.

<br/> 

> 피드백 4: final을 사용했군요! 그 이유는 무엇일까요?

Swift의 class는 Dynamic Dispatch를 사용한다. 이는 class는 상속될 수 있으며 메서드가 오버라이딩될 가능성 때문에 vTable에서 어떤 메서드를 쓸지를 동적으로 결정해야 하기 때문이다. 하지만 override를 하지 않는다고 보장된다면 Static Dispatch를 통해 메서드를 참조할 수 있기 때문에 final 키워드를 붙여 상속이 되지 않음을 명시함으로써 성능 개선을 이루어낼 수 있다.

[참고한 글 1](https://jcsoohwancho.github.io/2019-10-11-Dynamic-Dispatch와-성능-최적화)

[참고한 글 2]([Dynamic Dispatch와 성능 최적화 (jcsoohwancho.github.io)](https://jcsoohwancho.github.io/2019-10-11-Dynamic-Dispatch와-성능-최적화/))

<br/> 

> 피드백 5: constraint를 주기 위해 사용되는 날것의 상수를 끄집어낼 방법이 있을까요?

오토 레이아웃의 constraint를 잡을 때 사용되는 상수들을 관리할 수 있는 방법에 대한 피드백이었다. Enum의 type property로 필요한 상수들에 이름을 붙여 관리하는 방법으로 개선했다.

<br/> 

> 피드백 6: 모달을 사용한 이유가 있나요?

navigationController는 modal로 present하는 것이 아닌 pushViewController라는 메서드를 활용한다는 것을 몰랐었다. 피드백을 통해 개선했다.

<br/> 

> 피드백 7: get, fetch, retrive 등 다양한 표현이 있는데, get이라는 prefix를 사용한 이유가 무엇일까요?
> 그리고 이 메서드는 get이라는 이름을 달고 있어서 결과를 반환해줄 것 같은데, 반환값이 전혀 없군요!?

json 데이터를 가져오는 과정이므로 fetch를 사용하기 적절한 상황에서 get이라는 prefix를 달아놓은 메서드에 대해 온 피드백이다. fetch라는 단어에 익숙하지 않았었고 get이라는 단어가 지닌 뉘앙스 차이를 캐치하지 못했었다. 피드백을 통해 다른 여러 예제들을 보며 fetch라는 prefix를 사용하는 방안으로 바꾸어주었다.

<br/> 

> 피드백 8: 이미지뷰 자체도 외부에서 직접 접근하게 하기보다는 메서드를 통해 간접적으로 데이터를 꽂아주는편이 좋습니다

imageView의 접근제어자를 internal로 두고 imageView의 image에 직접 할당하는 코드에 대한 피드백이다. 프로퍼티에 직접 접근하기보단 메서드를 활용하여 간접적으로, 한정된 접근만을 허용하는 것이 바람직하다 생각되어 코드를 수정하였다.



> 피드백 9: 스크롤뷰의 스크롤 인디케이터로 인해서 텍스트가 가려지는 현상이 있습니다. 우리는 코드를 다루는 사람이기도 하지만, 사용자와 바로 만나는 뷰를 다루는 사람이라는 것도 명심해야합니다.

기능 구현에 급급하여 놓친 부분이었다. 스크롤바가 내용을 가리는 현상이 있었고 적절한 inset을 주어 해결했다. View를 다루는만큼  디테일한 부분의 구현에도 더 신경쓰게 되었다.



> 피드백 10: internal 메서드랑 private 메서드의 위치가 변경되면 좀 나으려나요?
>
> 메서드를 배치한 의도나 규칙이 있을까요?

메서드들의 순서에 대한 피드백이었다. 고민해본 결과 접근제어의 정도가 낮을수록 (open에 가까울수록) 위에 적어주는 것이 맞다고 판단했다. (누군가가 메서드를 사용하기 위해 구현부를 보려는 경우를 생각)



## 프로젝트 회고

처음으로 UI를 코드로만 구현한 프로젝트인데다 json이라는 생소한 키워드, encode와 decode에 대한 이해 등 수많은 지식들이 쏟아졌던 프로젝트였다. 

스크롤뷰를 어떻게 활용해야할지, 테이블뷰의 register, delegate, datasource 지정 과정 등 다양한 내용에 대해 학습할 수 있었다. 

또 야곰의 정성가득한 피드백을 통해 코딩컨벤션을 비롯해 사용하는 코드에 더 근거를 가지고 적을 수 있게 되었다.
