---
layout: post
title: 소프트웨어 개발에서의 Test
image:
categories: "Test"
tags:
  - Ruby on Rails
  - Test
---

## 소프트웨어 개발에서의 Test

모든 소프트웨어 시스템에서는 기본적인 개발방법론에 따라 Unit Test, Integration Test, User Acceptance Test 등을 진행해야합니다.(여기서 제가 말하는 개발방법론이란, V자 모델을 기준으로 생각하시면 좋을 것 같습니다.)
한글로는 단위 테스트, 결합/통합테스트, 종합테스트/이행테스트 등등.. 기업 혹은 개발환경마다 부르는 이름은 제각각 다르지만, 어느정도 의미는 일맥상통합니다.

개발 시에 이러한 테스트 사이클을 거치는데, 개발이 완료 된 후에도 신규 기능 추가 혹은 기능 변경 등을 하였을 때에는 기본적인 Regression Test (회귀 테스트, 새롭게 추가/변경된 기능이 기존의 다른 기능들과 결합하였을때 제대로 동작하는지 확인)를 기본으로 단위테스트, 통합테스트를 다시 수행해야합니다. 이 때, 웹 어플리케이션의 경우 직접 입력창에서 눈으로 확인해가며 동작을 확인할 수도 있으나 많은 시간을 소모해야합니다. 이렇기 때문에 테스트를 자동화하여 간단히 확인할 수 있어야할 것입니다.

어플리케이션을 개발하면서 작성하는 테스트 코드들을 자동화시켜 놓아야하고, 이러한 자동화된 테스트 케이스(혹은 Suite)들을 제대로 만들어놓는다면, 문제가 생겼을 때 상당히 도움이 되며 그것 자체로도 어플리케이션의 소스코드의 *”실행가능한 문서”*라고도 할 수 있겠습니다.

물론 어플리케이션의 소스코드 이외의 코드를 작성한다는 것은, 그 만큼 코드를 필요 이상으로 작성하기도 합니다만, 오히려 테스트케이스가 없을 때 보다 훨씬 더 개발이 빨라집니다. 테스트 케이스가 제대로 갖추어져 있다면, 버그를 찾아내기 위해 불필요한 시간을 소비하지 않을 수 있습니다. 제대로 될리가 없다며 믿지 않는 사람들도 있을 수 있습니다만, 한 번이라도 테스트 케이스에 능숙해진다면 틀림없이 효율적인 개발을 할 수 있을 것입니다. 그렇기 때문에 테스트 케이스를 작성하는 습관을 만드는 것은 매우 중요하다고도 할 수 있겠습니다.

테스트 케이스가 중요하다는 점은 많은 개발자들 사이에서의 공통된 인식입니다만, 세부적으로 들어가면 조금은 의견이 엇갈릴 수도 있습니다. 특히 테스트 주도 개발 _(TDD, Test Dirven Development, 처음에는 올바른 코드가 아니면 실패하는 테스트를 작성하고, 그 다음으로 제대로된 코드를 작성하여 통과하도록 하는 것)_ 에 대해서는 많은 의견이 있다고 생각하며, 항상 이것이 좋다고도 할 수 없습니다.

## 결국 테스트는 언제 하는 것이 좋은가?
그렇다면 언제, 어떠한 방법으로 테스트를 하면 좋을까요? 이점을 이해하기 위해서 테스트를 진행하는*목적* 을 다시 한 번 더 확인해보도록 합시다. 필자는 테스트에 대해 다음의 3개의 메리트가 있다고 생각합니다.

1. 테스트 케이스가 제대로 되어있다면, 기능이 정지될만큼의 회귀버그 (Regression Bug: 이전의 버그가 다시 나타난다거나, 기능의 추가/변경에 의한 부작용이 생기는 것) 의 발생을 막을 수 있습니다.
2. 테스트 케이스가 제대로 되어있다면, 코드를 안전하게*Refactoring*(기능을 변경하지 않고 코드를 개선하는 것) 이 가능합니다.
3. 테스트 코드는 어플리케이션 코드로 본다면*클라이언트*로써 동작하기 때문에, 어플리케이션의 설계나 시스템의 다른 부분과의 인터페이스를 결정할 때에 도움됩니다.

위 세 개의 메리트는 어플리케이션 코드보다 먼저 작성하지 않아도 얻을 수 있는 메리트이긴 합니다만, 테스트 주도 개발(TDD) 라는 방법을 언제든지 사용할 수 있도록 해놓는다면, 틀림없이 많은 부분에서 도움될 것 입니다. 테스트 방식이나 타이밍은 테스트 코드를 얼마만큼 물흐르듯이 작성할 수 있느냐에 달려있습니다. 대부분의 개발자는 테스트 코드를 작성하는 것에 익숙해진다면, 테스트를 맨 처음부터 작성하게 됩니다. 그 외에도 어플리케이션의 코드와 비교하여 테스트가 얼마만큼 작성하기 어려운지, 필요한 기능을 얼마만큼 정확하게 파악하고 있는지, 해당 기능이 미래에 없어지게 될 가능성은 없는지에 따라 테스트 코드의 작성여부는 많이 달라지게 될 것입니다.

어떠한 때에 “자주 테스트”를 하는가, “일괄적 테스트” 를 진행하는 가를 결정하는 판단기준이 되는 가이드라인이 있다면 매우 좋습니다. 필자의 경험을 바탕으로 다음과 같이 정리해보았습니다.

* 어플리케이션의 코드보다도 명확하게 테스트 코드가 짧고 심플하게 작성할 수 있다면, **미리 작성해놓는다.**
* 기능 동작의 요구사항이 아직 정해져 있지 않을 때는, 어플리케이션의 코드를 먼저 작성하고 예상되는 테스트 코드를 **나중에 작성해놓는다.**
* 보안이 중요한 코드 혹은 보안과 관련된 에러가 발생했을 때는, 테스트 코드를 **미리 작성한다.**
* 버그를 발견하게 된다면, 버그를 다시 발현시키는 테스트 코드를 **먼저 작성하고**, 회귀버그를 방지하는 시스템이 갖추어진 다음 수정을 해놓는다.
* 금방 수정될 것 같은 코드 (HTML구조의 세부사항 등) 에 대한 코드는 **나중에 작성한다.**
* 리팩토링할 때에는 **먼저 테스트 코드를 작성한다.** 특히 에러가 날 것 같은 코드나 프로그램이 멈출 것 같은 코드를 집중적으로 테스트한다.

위의 가이드라인을 따른다면, 컨트롤러나 모델의 테스트를 제일 먼저 작성하고, 그 다음 Intergration Test(모델/뷰/컨트롤러를 합친 결합테스트) 코드를 작성하는 흐름이 됩니다. 또한 불안정한 요소가 딱히 없는 것 같은 어플리케이션이나 빈번하게 수정될 가능성이 있는 어플리케이션 코드를 작성할 때(주로 뷰. HTML 코드등의 웹)에는, 큰 마음 먹고 테스트 코드를 생략해버리는 경우도 있습니다.
